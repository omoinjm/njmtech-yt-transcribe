# Prompt to Recreate Video Transcriber CLI Project

This prompt outlines the steps, tools, and principles required to create the `yt-transcribe` CLI tool from scratch. It is designed to be comprehensive enough for an AI agent or a developer to understand the project's requirements and structure.

---

## Project Goal

Create a Command Line Interface (CLI) tool in Go that transcribes videos from various platforms into text.

## Core Features

1.  **Accept Video Link:** The CLI tool must accept a valid video URL (from platforms like YouTube, Instagram, etc.) as a command-line argument.
2.  **Audio Download:** Download the audio stream from the provided video.
3.  **Audio Transcription:** Transcribe the downloaded audio into text.
4.  **Output Text:** Save the transcribed text to a file (defaulting to the system's temporary directory, with an option for a user-specified directory).
5.  **Temporary File Cleanup:** Automatically remove temporary audio files after transcription.

## Technology Stack & Tools

*   **Programming Language:** Go (Golang)
*   **CLI Argument Parsing:** Go's standard `flag` package.
*   **Audio Downloading:** Integration with the external `yt-dlp` command-line tool via `os/exec`.
*   **Audio Post-Processing:** Integration with the external `ffmpeg` command-line tool.
*   **Audio Transcription:** Integration with the external `whisper-cli` command-line tool from `whisper.cpp` via `os/exec`.

## Principles & Architecture

The project should be developed following these principles:

1.  **SOLID Principles:**
    *   **Interface-Oriented Design:** Emphasize interfaces (`VideoDownloader`, `Transcriber`) for defining contracts and promoting extensibility.
    *   **Dependency Inversion:** `main.go` should depend on abstractions (interfaces) rather than concrete implementations.
    *   **Single Responsibility Principle (SRP):** Each package, interface, and struct should have a single, well-defined responsibility.
2.  **Modular Structure:**
    *   Organize code into logical packages (e.g., `pkg/downloader`, `pkg/transcriber`).
3.  **Robust Error Handling:** Implement clear and informative error handling throughout the application.
4.  **Comprehensive Comments:** Add extensive comments explaining the purpose of packages, interfaces, structs, functions, and complex logic sections.

## Project Setup & Conventions

1.  **Go Module:** Initialize a standard Go module (e.g., `yt-transcribe`).
2.  **`.gitignore`:** Create a `.gitignore` file specific to Go projects, including common Go build artifacts, IDE files, and the generated executable.
3.  **`whisper.cpp` Model:**
    *   The project requires a `whisper.cpp` model to be downloaded.
    *   The path to the model must be specified via the `WHISPER_MODEL_PATH` environment variable. This can be done by creating a `.env` file in the project root.
4.  **Documentation & Project Info:**
    *   `README.md`: Provide a comprehensive `README.md` for tool usage, prerequisites, building, and running instructions.
    *   `LICENSE`: Include an appropriate open-source license (e.g., MIT).
    *   `CONTRIBUTING.md`: Provide guidelines for potential contributors.
    *   `SECURITY.md`: Outline the process for reporting security vulnerabilities.

## Testing

1.  **Unit Tests:** Develop thorough unit tests for all core components.
2.  **Mocking External Dependencies:**
    *   For the `downloader` package, implement mocking for `os/exec.Command` and `os.LookPath` to simulate various scenarios (e.g., `yt-dlp` not found, successful download, command failures).
    *   For the `transcriber` package, implement mocking for `os/exec.Command` and `os.LookPath` to simulate various scenarios (e.g., `whisper-cli` not found, successful transcription, command failures).
3.  **Helper Function Tests:** Test any helper functions.
4.  **Test Isolation:** Ensure tests are isolated and do not interfere with each other.

---

## Development Steps (Chronological Hint for Implementation)

1.  Initialize Go module and create `main.go`.
2.  Define CLI argument parsing in `main.go`.
3.  Create `pkg/downloader` package:
    *   Define `VideoDownloader` interface and implement `YTDLPAudioDownloader` in `pkg/downloader/yt_dlp.go`, wrapping `yt-dlp`.
4.  Create `pkg/transcriber` package:
    *   Define `Transcriber` interface and implement `WhisperCPPTranscriber` in `pkg/transcriber/whisper_cpp.go`, wrapping `whisper-cli`.
5.  Integrate `downloader` and `transcriber` in `main.go` using dependency injection.
6.  Add `go.mod` for dependencies.
7.  Create `.gitignore`, `README.md`, `LICENSE`, `CONTRIBUTING.md`, `SECURITY.md`, and `.env.example`.
8.  Implement unit tests:
    *   `pkg/transcriber/whisper_cpp_test.go` for `WhisperCPPTranscriber`.
    *   `pkg/downloader/yt_dlp_test.go` for `YTDLPAudioDownloader`.

---
**Note on "Auto-Update":** This prompt reflects the project's state as of its generation. If the project undergoes further development, this prompt would need to be regenerated by analyzing the new codebase to capture the changes.